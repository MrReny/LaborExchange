@using Microsoft.AspNetCore.Http
@inherits LayoutComponentBase
@inject IHttpContextAccessor _httpContextAccessor
@inject NavigationManager _navigationManager


<RadzenContextMenu/>

<RadzenLayout>
    <RadzenHeader>
        <ChildContent>
            <div style="display: inline-flex; justify-content: flex-start; width: 100%">
                <RadzenMenu>
                    <RadzenMenuItem Text="" Icon="home"/>
                    <RadzenMenuItem Text="Работники" Path="employees" Icon="account_box" />
                    <RadzenMenuItem Text="Вакансии" Path="jobs" Icon="list"/>
                    @*<RadzenMenuItem Text="Menu" Path="menu" Icon="line_weight"></RadzenMenuItem>
                                        <RadzenMenuItem Text="FileInput" Path="fileinput" Icon="attach_file"></RadzenMenuItem>
                                        <RadzenMenuItem Text="Dialog" Path="dialog" Icon="perm_media"></RadzenMenuItem>
                                        <RadzenMenuItem Text="Notification" Path="notification" Icon="announcement"></RadzenMenuItem>

                                        <RadzenMenuItem Text="Inputs" Icon="payment">
                                            <RadzenMenuItem Text="CheckBox" Path="checkbox" Icon="check_circle"></RadzenMenuItem>
                                            <RadzenMenuItem Text="TextBox" Path="textbox" Icon="input"></RadzenMenuItem>
                                            <RadzenMenuItem Text="TextArea" Path="textarea" Icon="description"></RadzenMenuItem>
                                            <RadzenMenuItem Text="Password" Path="password" Icon="payment"></RadzenMenuItem>
                                            <RadzenMenuItem Text="Numeric" Path="numeric" Icon="aspect_ratio"></RadzenMenuItem>
                                            <RadzenMenuItem Text="DatePicker" Path="datepicker" Icon="date_range"></RadzenMenuItem>
                                        </RadzenMenuItem>
                                        <RadzenMenuItem Text="Data" Icon="save">
                                            <RadzenMenuItem Text="DataGrid" Path="datagrid" Icon="grid_on"></RadzenMenuItem>

                                            <RadzenMenuItem Text="DropDown" Path="dropdown" Icon="dns"></RadzenMenuItem>
                                            <RadzenMenuItem Text="DropDownDataGrid" Path="dropdown-datagrid" Icon="receipt"></RadzenMenuItem>
                                            <RadzenMenuItem Text="ListBox" Path="listbox" Icon="view_list"></RadzenMenuItem>
                                            <RadzenMenuItem Text="TemplateForm" Path="templateform" Icon="line_style"></RadzenMenuItem>
                                        </RadzenMenuItem>
                                        <RadzenMenuItem Text="Containers" Icon="account_box">
                                            <RadzenMenuItem Text="Tabs" Path="tabs" Icon="tab"></RadzenMenuItem>
                                            <RadzenMenuItem Text="Panel" Path="panel" Icon="content_paste"></RadzenMenuItem>
                                            <RadzenMenuItem Text="Fieldset" Path="fieldset" Icon="account_balance_wallet"></RadzenMenuItem>
                                            <RadzenMenuItem Text="Card" Path="card" Icon="line_style"></RadzenMenuItem>
                                        </RadzenMenuItem>
                                        <RadzenMenuItem Text="More">
                                            <RadzenMenuItem Text="Item1"></RadzenMenuItem>
                                            <RadzenMenuItem Text="Item2"></RadzenMenuItem>
                                            <RadzenMenuItem Text="More items">
                                                <RadzenMenuItem Text="More sub items">
                                                    <RadzenMenuItem Text="Item1"></RadzenMenuItem>
                                                    <RadzenMenuItem Text="Item2"></RadzenMenuItem>
                                                </RadzenMenuItem>
                                            </RadzenMenuItem>
                                        </RadzenMenuItem>*@
                </RadzenMenu>
                <RadzenProfileMenu Style="margin-left: auto;">
                    <Template>
                        <RadzenGravatar Email="user@example.com">
                        </RadzenGravatar>
                    </Template>
                    <ChildContent>
                        <RadzenProfileMenuItem Text="Buttons" Path="buttons" Icon="account_circle"></RadzenProfileMenuItem>
                        <RadzenProfileMenuItem Text="Menu" Path="menu" Icon="line_weight"></RadzenProfileMenuItem>
                        <RadzenProfileMenuItem Text="FileInput" Path="fileinput" Icon="attach_file"></RadzenProfileMenuItem>
                        <RadzenProfileMenuItem Text="Dialog" Path="dialog" Icon="perm_media"></RadzenProfileMenuItem>
                        <RadzenProfileMenuItem Text="Notification" Path="notification" Icon="announcement"></RadzenProfileMenuItem>
                    </ChildContent>
                </RadzenProfileMenu>
            </div>
        </ChildContent>
    </RadzenHeader>
    <RadzenBody>
        <ChildContent>
            <RadzenContentContainer Name="main">
                @Body
            </RadzenContentContainer>
        </ChildContent>
    </RadzenBody>
</RadzenLayout>

@code {
    // TODO Auth
    public HttpContext CurrentContext;

    protected override void OnInitialized()
    {
        if (_httpContextAccessor?.HttpContext?.Request == null) return;

        var userAgent = _httpContextAccessor.HttpContext.Request.Headers["User-Agent"].FirstOrDefault();
        CurrentContext = _httpContextAccessor.HttpContext;
        Console.WriteLine(_httpContextAccessor.HttpContext.User.Identity?.Name);
    }
}